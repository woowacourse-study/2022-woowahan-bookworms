## 코어자바스크립트(p.20~p.29)

- 불변 객체
- 얕은 복사, 깊은 복사

---

# 배운 점(Facts)

### 불변 객체가 필요할 경우

- 값으로 전달 받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우

### 얕은 복사, 깊은 복사

- 얕은 복사는 바로 아래 단계의 값만 복사하는 방법이고, 깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.

```javascript
// 얕은 복사

var copyObject = function (target) {
  var result = {};
  for (var prop in target) {
    result[prop] = target[prop];
  }
  return result;
};
```

```javascript
// 깊은 복사

var copyObjectDeep = function (target) {
  var result = {};
  if(typeof target === 'object' && typeof !== null){
      for(var prop in target){
          result[prop] = copyObjectDeep(target[prop])
      }
  }else{
      result = target;
  }
  return result;
};
```

깊은 복사는 target이 객체인 경우 내부 프로퍼티들을 순회하며 재귀적으로 호출하여 복사를 한다. 원본과 사본이 서로 완전히 다른 객체를 참조하게 되어 어느쪽의 프로퍼티를 변경하더라고 다른 쪽에 영향을 주지 않는다.

```javascript
//JSON을 활용한 간단한 깊은 복사

var copyObjectViaJSON = function (target) {
  return JSON.parse(JSON.stringify(target));
};
```

httpRequest로 받은 데이터를 저장한 객체를 복사할 때 등 순수한 정보만 다룰 떄 JSON을 활용한 간단한 깊은 복사를 사용하면 된다.(메서드나 숨겨진 프로퍼티인 \_\_proto\_\_, getter/setter 등은 JSON으로 변경할 수 없는 프로퍼티들은 무시한다.)

---

# 회고(Feelings)

- 객체를 값으로 전달 하는 경우가 많고 그 객체를 변경하는 경우도 발생 한다. 이때 참조되어 있는 프로퍼티가 변경됨에 따라 원본의 프로퍼티까지 변경됨으로 다음과 같은 복사 방법을 생각해 봐야겠다.

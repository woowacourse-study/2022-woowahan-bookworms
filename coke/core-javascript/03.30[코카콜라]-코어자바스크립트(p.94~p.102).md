## 코어자바스크립트(p.94~p.102)

- 콜백함수

---

# 배운 점(Facts)

### 콜백함수란?

- 콜백함수는 다른 코드의 인자로 넘겨주는 함수이다.
- 콜백함수는 다른코드(함수 또는 메서드)에게 콜백함수를 인자로 넘겨줌으로써 그 제어권도 함께 위임한 함수이다.
- 위임받은 코드는 자체적인 내부 로직에 의해 이 콜백 함수를 적절한 시점에 실행 한다.

```javascript
var newArr = [10, 20, 30].map(function (currentValue, index) {
  console.log(currentValue, index);
  return currentValue + 5;
});

console.log(newArr);
// 10 0
// 20 1
// 30 2
// [15, 25, 35]
```

**콜백 함수의 제어권을 넘겨 받은 코드는 콜백 함수를 호출할 때 인자에 어떤 값들을 어떤 순서로 넘길 것인지에 대한 제어권을 가진다.**

### 콜백함수 this

- 콜백함수도 함수이기 때문에 기본적으로 this가 전역객체를 참조한다.
- 하지만, 제어권을 넘겨받을 코드에서 콜백함수에 별도로 this가 될 대상을 지정한 경우에는 그 대상을 참조한다.

```javascript
// Array.prototype.map 구현
Array.prototype.map = function (callback, thisArg) {
  var mappedArr = [];
  for (var i = 0; i < this.length; i++) {
    var mappedValue = callback.call(thisArg || window, this[i], i, this);
    mappedArr[i] = mappedValue;
  }
  return mappedArr;
};
```

- this에 다른 값이 담기는 이유...
- this에는 thisArg 값이 있을 경우네느 그 값을, 없을 경우에는 전역객체를 지정한다.
- 제어권을 넘겨 받을 코드에서 call/apply 메서드의 첫 번째 인자에 콜백 함수 내부에서의 this가 될 대상을 명시적으로 바인딩 하기 때문이다.

---

# 회고(Feelings)

- 콜백함수를 구현 해 보면 내부의 코드에서 call/apply로 함수 내부의 this를 명시적으로 바인딩한다.

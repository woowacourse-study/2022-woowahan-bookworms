## 코어자바스크립트(p.115~p.125)

- 클로저
- 클로저를 좀 더 자세히 알아야 겠다는 생각에 잠시 클로저 부분으로 책을 읽습니다.

---

# 배운 점(Facts)

## 클로저란?

- 어떤 함수에서 선언한 변수를 참조하는 내부함수에서만 발생하는 현상!
- 선언될 당시의 LexicalEnvironment와의 상호관계

```javascript
// 외부 함수의 변수를 참조하는 내부 함수 1
var outer = function () {
  var a = 1;
  var inner = function () {
    console.log(++a);
  };
  inner();
};
outer();
```

outer함수의 실행 컨텍스트가 종료되면 LexicalEnvironment에 저장된 식별자들(a, inner)에 대한 참조를 지웁니다. 그러면 각 주소에 저장돼 있던 값들은 자신을 참조하는 변수가 하나도 없게 되므로 가비지 컬렉터의 수집이 대상이 될 것입니다.

```javascript
// 외부 함수의 변수를 참조하는 내부 함수 2
var outer = function () {
  var a = 1;
  var inner = function () {
    return ++a;
  };
  return inner; // inner 함수 자체를 반환
};
var outer2 = outer();
console.log(outer2()); // 2
console.log(outer2()); // 3
```

- outer함수의 실행 컨텍스트가 종료될 때, outer2 변수는 outer 함수의 실행 결과인 inner 함수를 참조하게 된다.
- outer함수는 이미 실행이 끝났는데 a 변수에 접근을 할수 있는가? inner함수가 a 변수를 참조하고 있기 때문에 outer 함수는 가비지컬렉터 의 수집 대상이 아니다.
- 가비지 컬렉터는 어떤 값을 참조한느 변수가 하나라도 있다면 그 값은 수집 대상에서 제외 한다.
- 즉, 클로저란? **어떤 함수 A에서 선언한 변수 a를 참조한느 내부함수 B를 외부로 전달할 경우 A의 실행 컨텍스트가 종료된 이후에도 변수 a가 사라지지 않는 현상을 말한다.**
- 클로저 현상에 의해 메모리에 남겨진 변수들의 집합

## 클로저 메모리

- 클로저는 어떤 필요에 의해 의도적으로 함수의 지역변수를 메모리를 소모하도록 함으로써 발생 시킨다.
- 그럼 그 필요성을 없에면 더이상 메모리를 소모 하지 않는다.
- 식별자에 참조형이 아닌 기본형 데이터(null, undefined)를 할당 하면 된다.

```javascript
var outer = function () {
  var a = 1;
  var inner = function () {
    return ++a;
  };
  return inner; // inner 함수 자체를 반환
};
var outer2 = outer();
outer2 = null;
```

---

# 회고(Feelings)

- 음...클로저 흥미 롭네
- 좀 더 읽어 봐야겠다. 우선 궁금해서 앞에 내용을 읽지 않고 클로저 부분을 읽었지만...클로저 부분 다 읽고 건너띈 앞 내용을 읽어야 겠다. 그리고 다시 클로저 읽을 차례가 오면 다시 한번 깊게 생각해보면서 읽어야겠다.
- 코어 자바스크립트 좋네!

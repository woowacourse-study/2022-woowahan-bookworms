## chp 1 리팩터링: 첫 번째 예시(p.34~p.49)

- 예시를 통해 리팩터링의 개념을 알아본다.

---

### 배운 점(Facts)

- 네이밍이 가장 중요하다. 좀 더 직관적이고 명시적인 이름이 있다면 주저 하지 않고 바꾼다.
- 이름만 보고도 본문 소스 코드를 알수 있으면 완벽한 리팩터링을 한 것이다.
- 리팩터링은 다음 과 같은 과정으로 분류 할 수 있다.
  1. **반복문 쪼개기**로 변수 값을 누적시키는 부분을 분리한다.
  2. **문장 슬라이드하기**로 변수 초기화 문장을 변수 값 누적 코드 바로 앞으로 옮긴다.
  3. **함수 추출하기**로 적립 포인트 계산 부분을 별도 함수로 추출한다.
  4. **변수 인라인하기**로 해당 변수를 제거한다.

```javascript
// 예시 변수 인라인하기

// before
let basePrice = anOrder.basePrice;
return basePrice > 1000;

// refactor
return anOrder.basePrice > 1000;
```

> 변수는 함수 안에서 표현식을 가리키는 이름으로 쓰이며, 대체로 긍정적인 효과를 준다. 하지만 그 이름이 원래 표현식과 다를 바 없을 때도 있다. 또 변수가 주변 코드를 리팩터링 하는 데 방해가 되기도 한다. 이럴 경우 인라인 한다.

- 리팩터링 후, 테스트에서 오류가 발생 한다면?
  테스트에 실패한 리팩터링의 단계를 더 작게 나눠 다시 리팩터링을 시도한다. 그래서 매번 커밋을 하고 테스트를 해야 한다.

---

### 회고(Feelings)

- 계속 네이밍이 중요하다고 한다. 나 역시 네이밍이 리팩토링의 가장 중요한 부분이라고 생각한다. 하지만 매번..어려움...ㅠ
- 리팩토링은 사람이 하기 때문에 책에서는 의식적으로 비슷한 기능, 같은 변수를 사용하는 부분, 해당 변수를 가까운 위치로 모아서 분리 시키고 추출하는 방식으로 리팩토링하는 방법을 말해주고 있다.

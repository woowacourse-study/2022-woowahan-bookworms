# 03.14 독서 인증

---
## 코딩을 지탱하는 기술 ( 214 - 239 )

---


### 12장. 상속을 통한 재사용

12.1 상속이란?
- 상속에 관한 다양한 접근법
    - 일반화 / 특수화
        - 부모 클래스로 일반적인 기능을 구현하고 자식 클래스로 목적에 특화된 기능을 구현한다는 접근법
        - 클래스 = 분류 라는 접근과 일치
        - `자식 클래스는 부모 클래스의 일종입니까?` yes
    - 공통 부분을 추출
        - 복수 클래스의 공통 부분을 부모 클래스로서 추출하면 좋다는 접근법
        - `자식 클래스는 부모 클래스의 일종입니까?` no
    - 차분 구현
        - 상속 후 변경된 부분만을 구현하면 효율이 좋다는 접근법
        - 상속을 재사용을 위해 사용함으로 구현이 편해질 수 있다는 발상
        - `자식 클래스는 부모 클래스의 일종입니까?` no
- 상속은 양날의 칼
    - 차분 구현의 경우 깊은 상속 트리를 만들어내는 경향이 있다.
        - 깊은 상속 트리에서 한 객체가 메소드 X를 가지고 있을 때 정의가 어디있는지 상속을 따라가면서 수많은 코드를 확인해야 한다.
        - 어떤 메소드를 변경하면 그 영향이 모든 자식 클래스까지 이르게 된다.
        - 영향 범위가 넓어질 수록 해당 변경이 문제를 일으킬지 않을지 자신을 잃게된다.
    - 상속을 사용해서 코드를 재사용하면 코딩량이 줄여서 편하다. 하지만 상속을 반복하면 코드 영향범위가 넓어져 이해하기 어렵다. -> 상속 트리의 깊이를 낮추는 것이 중요하다.
- 리스코프 치환 법칙
    - 어떤 클래스 T의 객체에 대해 항상 성립하는 조건이 있다면 그 조건은 자식 클래스 S의 객체에서도 항상 성립해야만 한다.
    - 상속은 is-a 관계가 아니면 안된다.
    - 클래스 상속과 형 구조의 정합성을 유지하기가 얼마나 어려운지 배웠다.

12.2 다중 상속

- 다중 상속을 이용하면 코드 재사용 방법으로는 좋은 도구다. 
- 하지만 이로 발생하는 충돌 문제가 있다.
    - 복수의 부모 클래스가 같은 이름의 메소드를 가지는 경우 누구를 따라야할까?
- 해결책 1. 다중 상속을 금지한다
    - 자바에서는 다중 상속을 금지하기로 했다. 다중 상속을 인정하지 않으면 앞의 경우와 같은 문제가 발생하지 않는다. 다중 상속을 버림으로 문제를 해결할 수 있지만 다중 상속의 편리함 또한 버리게 된다.
    - 자바에서는 코딩 시 재사용을 목적으로 한 상속을 피하려고 하는 움직임을 보인다.
    - 위임
        - 사용하고 싶은 코드를 가지는 클래스 객체를 만들고 필요에 따라 해당 클래스에 처리를 맡기는 방식
        - 복수 클래스를 상속을 사용해서 결합시키는 것이 아니라 위임을 사용해서 조합하는 것이 낫다.
    - 인터페이스
        - 자바에서 인터페이스 다중 상속이 가능하다.
        - 인터페이스는 코드를 가지고 있지 않는 클래스. ( 요즘은 다르지만.. ) 사양만 가지고 있다.
        - 사양만을 명시하기 때문에 다중 상속 시에도 문제가 없다.

- 해결책 2. 메소드 해결 순서를 고민한다.
    - 어떤 순서로 탐색하면 좋을지 명확하게 정의하는 접근법
    - 파이썬에서는 C3 선형화를 이용
        - 부모 클래스는 자식 클래스보다 먼저 탐색되지 않는다.
        - 어떤 클래스가 복수의 부모 클래스를 상속하고 있으면 먼저 만들어진 것이 우선된다.

- 해결책 3. 처리를 섞는다.
    - 재사용하고 싶은 기능만 모은 작은 클래스를 만들어 해당 기능을 추가하고 싶은 클래스에 섞어 넣으면 된다. (믹스인)
- 해결책 4. 트레이트
    - 왜 다중 상속은 이런 문제를 겪고 있는것인가?
        - 클래스에 2가지 상반된 역할이 존재. 
        - 하나는 인스턴스를 만들기 위한 것. 이를 위해선 필요한 모든 것을 가지고 완결된 형태의 큰 클래스여야 한다.
        - 두 번째는 재사용 단위라는 역할로 이를 위해서는 필요 없는 기능을 가지고 있지 않은 작은 클래스여야 한다.
    - 인스턴스를 만들기 위한 것으로 사용될 때는 재사용 단위로 너무 크다. 그러면 재사용 단위라는 역할에 특화된 보다 작은 구조 ( 메소드 묶음 = 트레이트 )로 만드는 것

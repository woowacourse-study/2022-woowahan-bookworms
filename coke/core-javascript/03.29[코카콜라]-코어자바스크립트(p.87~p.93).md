## 코어자바스크립트(p.87~p.93)

- this, bind, 화살표 함수, 콜백함수

---

# 배운 점(Facts)

## bind

```javascript
var func = function (a, b, c, d) {
  console.log(this, a, b, c, d);
};

func(1, 2, 3, 4); // window{...} 1 2 3 4

var bindFunc1 = func.bind({ x: 1 });
bindFunc1(5, 6, 7, 8); // { x:1 } 5 6 7 8

var bindFunc2 = func.bind({ x: 1 }, 4, 5);
bindFunc2(6, 7); // { x:1 } 4 5 6 7
bindFunc2(8, 9); // { x:1 } 4 5 8 9

console.log(func.name); // func
console.log(bindFunc2.name); // bound func
```

- bind 메서드는 새로운 함수를 담는다.
- bind 메서드를 적용하면 name 프로퍼티에 동사 bind의 수도태인 'bound'라는 접두어가 붙는다.
- 따라서 call이나 apply 보다 코드를 추적하기 쉽다.

## 상위 컨텍스트의 this를 내부함수나 콜백함수에 전달하기

```javascript
var obj = {
  outer: function () {
    console.log(this);
    var innerFunc = function () {
      console.log(this);
    };

    innerFunc.call(this);
  },
};
obj.outer();

var obj2 = {
  outer: function () {
    console.log(this);
    var innerFunc = function () {
      console.log(this);
    }.bind(this);

    innerFunc();
  },
};
obj2.outer();
```

## 화살표 함수의 예외사항

- ES6에 새롭게 도입된 화살표 함수는 싱행 컨텍스트 생성 시 this를 바인딩 하는 과정이 제외 되었다.
- 함수 내부에 this가 없으며, 접근하고자 하면 스코프체인상 가장 가까운 this에 접근 한다.

```javascript
var obj = {
  outer: function () {
    console.log(this);
    var innerFunc = () => {
      console.log(this);
    };

    innerFunc();
  },
};
obj.outer();
```

## 정리

### 명시적 this 바인딩이 없는 한 늘 다음과 같은 규칙을 지킨다.

- 전역공간에서의 this는 전역 객체(브라우저는 window, Node.js에서는 global)를 참조한다.
- 어떤 함수를 메서드로서 호출한 경우 this는 메서드 호출 객체(메서드명의 앞의 객체)를 참조한다.
- 어떤 함수를 함수로서 호출한 경우 this는 전역객체를 참조한다. 메서드의 내부함수에서도 같다.
- 콜백 함수 내부에서의 this는 해당 콜백 함수의 제어권을 넘겨받은 함수가 정의한 바에 따르며, 정의하지 않은 경우에는 전역 객체를 참조한다.
- 생성자 함수에서의 this는 생성될 인스턴스를 참조한다.

### 명시적 this 바인딩을 한 경우.

- call, apply 메서드는 this를 명시적으로 지정하면서 함수 또는 메서드를 호출한다.
- bind 메서드는 this 및 함수에 넘길 인수를 일부 지정해서 새로운 함수를 만든다.
- 요소를 순회하면서 콜백 함수를 반복 호출하는 내용의 일부 메서드는 별도의 인자로 this를 받기도 한다.

---

# 회고(Feelings)

- this는 실제 코드에서 적용을 해보면 좀 더 익혀 봐야겠다.
- 실제 사례를 통해 몸으로 익혀야 좀 더 어떻게 돌아 가는지 알거 같다.

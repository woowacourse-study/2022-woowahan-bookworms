# 자바의 신
# ch21. 제네릭
p572-583

## 제네릭
- 타입 형 변환에서 발생할 수 있는 문제점을 "사전"에 없애기 위해 만들어짐
<br>("사전"이란 런타임이 아닌 컴파일때 점검할 수 있도록 한 것)

```java
public class CastingDTO implements Serializable {
    private Object object;

    public void setObject(Object object) {
        this.object = object;
    }

    public Object getObject() {
        return object;
    }
}

CastingDTO dto = new CastingDTO();
dto.setObject(new String());
// getObject 메소드 사용시 형변환이 필요함
// 하지만 어떤 타입을 사용했는지 기억이 안나 instanceof 예약어로 타입을 점검해야 할 떄도 있음
if (dto.getObject instanceof String) {
    String data = (String) dto.getObject();
}

```

```java
public class CastingGenericDTO<T> implements Serializable {
    private T object;

    public void setObject(T object) {
        this.object = object;
    }

    public T getObject() {
        return object;
    }
}

// dto선언시 타입을 명시해주면, 뒤에 getObject에서 타입을 점검하고 변환할 필요가 없어짐
CastingGenericDTO<String> dto = new CastingGenericDTO<String>();
dto.setObject(new String());

String data = =dto.getObject();
```


## 제네릭 타입의 이름 규칙
- E: 요소 (Element, 자바 컬렉션에서 주로 사용함)
- K: 키
- N: 숫자
- T: 타입
- V: 값
- S, U, V: 두 번째, 세 번째, 네 번째에 선언된 타입

## 제네릭에 있는 '?' (와일드카드 타입)
```java
// 아래와 같은 클래스가 있을 때
public class WildCardGeneric<W> {
    W wildCard;

    public void setWildCard(W wildCard) {
        this.wildCard = wildCard;
    }

    public W getWildCard() {
        return wildCard;
    }
}

public class Sample {

    // 이렇게 ?를 사용하면 여러가지 타입으로 제네릭이 선언된 클래스들을 모두 받을 수 있다.
    // 대신 내부에선 타입을 모르기 때문에 Object로 받고 instanceof로 형을 찾아주어야 한다.
    public void wildCardMethod(WildCardGeneric<?> c) {
        Object value = c.getWildCard();

        if (value instanceof String) {
            // ...
        }
    }
}

// 하지만 아래와 같이 사용할 순 없다.
// ?를 이용해 위와 같이 객체의 값을 가져올 순 있지만
WildCardGeneric<?> wildCard = new WildCardGeneric<String>();
// 이와 같이 ?로 선언된 객체에 특정 타입으로 값을 지정하는 것은 불가능
wildCard.setWildCard("A");
```

## 제네릭 선언에 사용하는 타입의 범위도 지정할 수 있다.
- '?' 대신 '? extends 타입'을 사용하면 '타입'을 상속받은 모든 클래스만 사용할 수 있음

## 메소드를 제네릭하게 선언하기
위의 ?를 사용한 객체를 매개변수로 가지는 메소드들은 객체에 값을 추가할 수 없었다.
메소드를 이용해 제네릭 객체에 값을 추가하는 방법은?

```java
// 아래와 같이 하면 됨
public <T> void genericMethod(WildCardGeneric<T> c, T addValue) {
    c.setWildCard(addValue);
}

// extends도 사용가능
public <T extends Car> void genericMethod(WildCardGeneric<T> c, T addValue)

// 제네릭 타입 여러개도 가능
public <T, S extends Car> void genericMethod(WildCardGeneric<T> c, T addValue, S another) 


WildCardGeneric<String> wildCard = new WildCardGeneric<String>();
genericMethod(wildcard, "Data");
```

